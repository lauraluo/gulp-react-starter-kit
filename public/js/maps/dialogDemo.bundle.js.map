{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/components/core/Mixin.DialogRelayout.jsx","src/components/dialog/Dialog.jsx","src/components/dialog/DialogButton.jsx","src/components/dialog/DialogDemo.jsx","src/dialogDemo.js"],"names":[],"mappings":"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","file":"../../mockExamples/dialogDemo.bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import $ from \"jquery\"\nimport React from 'react'\n\nfunction DialogRelayout(WrappedComponent, configs) {\n\n    configs = Object.assign({\n        root: '#GlobalContainer', //for body > div\n        modifierRootClass: 'dialog-opened', //modifier root\n        container: '.container', //for prevent page scroll\n        containerBody: '.container-body' //for positioning main content container\n    }, configs);\n\n    class MixiedComponentWithRelayout extends React.Component {\n        constructor(props) {\n            super(props);\n        }\n\n        _relayout() {\n            console.log(\"_relayout\");\n            var root = $(configs.root),\n                container = $(configs.container),\n                containerBody = $(configs.containerBody),\n                posY = $(document).scrollTop();\n\n            if ((this.state.isOpened && root.hasClass(configs.toggleClass)) || (!this.state.isOpened && !root.hasClass(configs.toggleClass))) \n                return;\n\n            if (this.state.isOpened) {\n                //modifier root\n                root.toggleClass(configs.modifierRootClass);\n                //prevent page scroll for mobile\n                container.css({position: 'absolute'});\n                //positioning container of main content in dialog background\n                containerBody.css({\n                    position: 'fixed',\n                    top: -(posY)\n                });\n            } else {\n                //reset all\n                root.removeClass(configs.modifierRootClass);\n                container.removeAttr('style');\n                containerBody.removeAttr('style');\n                $(document).scrollTop(posY);\n            }\n\n        }\n\n        proc() {\n            console.log('proc');\n        }\n\n        componentDidMount() {\n            console.log('relayout componentDidMount');\n        }\n\n        componentWillUnmount() {\n            console.log('relayout componentWillUnmount');\n        }\n\n        componentWillMount() {\n            console.log('relayout componentWillMount');\n        }\n\n\n        render() {\n\n            var props = Object.assign({}, this.props, {\n                ref: () => {\n                    this.proc.bind(this)\n                },\n                _relayout: this._relayout\n            })\n\n            return <WrappedComponent {...props}/>\n        }\n    }\n\n    return MixiedComponentWithRelayout;\n}\nexport default DialogRelayout;","import Reflux from \"reflux\"\nimport React from 'react'\nimport $ from \"jquery\"\nimport DialogButton from \"./DialogButton\"\nimport DialogRelayoutMixin from \"../core/Mixin.DialogRelayout\"\n\nvar DialogActions = Reflux.createActions([\n    \"showDialog\",\n    \"showDialogYesNo\",\n    \"showDialogList\",\n    \"showDialogListYesNo\",\n    \"showDialogScene\",\n    \"showDialogToast\",\n    \"hideDialog\",\n    \"setDialogName\",\n    \"clearDialogName\"\n]);\n\nclass DialogStore extends Reflux.Store {\n    constructor(props) {\n        super(props);\n        this.state = {\n            isOpened: false,\n            posY: 0,\n            type: 0,\n            title: '',\n            content: '',\n            buttons: [],\n            didOpened: null,\n            willOpen: null,\n            didClosed: null\n\n        };\n        this.listenables = DialogActions;\n    }\n\n    _updateState() {\n        if (!this.state.isOpened && this.state.type != 0) {\n            this.state.posY = $(document).scrollTop();\n        }\n\n        this.state.isOpened = (this.state.type != 0);\n        this.trigger(this.state);\n    }\n\n    _checkConfigsInterface = (configs) => {\n        var result = true;\n\n        Object\n            .keys(configs)\n            .map((key, index) => {\n                var value = configs[key];\n\n                switch (key) {\n                    case \"title\":\n                        if (typeof value !== \"string\") {\n                            console.error(\"title should be a string\");\n                            result = false;\n                        }\n                        break;\n                    case \"content\":\n                        if (typeof value !== \"function\" && typeof value !== \"string\") {\n                            console.error(\"content should be a functional component or a string\");\n                            result = false;\n                        }\n                        break;\n                    case \"buttons\":\n                        if (Object.prototype.toString.call(value) !== '[object Array]') {\n                            console.error(\"buttons should be an Array\");\n                            result = false;\n                        }\n                        break;\n                    case \"didOpened\":\n                    case \"willOpen\":\n                    case \"didClosed\":\n                        if (typeof value !== \"function\") {\n                            console.error(\"callback should be an function\");\n                            result = false;\n                        }\n                        break;\n                    default:\n                        return;\n                }\n            });\n\n        return result;\n\n    }\n\n    onShowDialog = (configs = {\n        title: \"\",\n        content: {},\n        buttons: [],\n        didOpened: null\n    }) => {\n\n        if (!this._checkConfigsInterface(configs)) {\n            return;\n        }\n\n        this.state.type = 1;\n        this.state.title = configs.title;\n        this.state.content = configs.content;\n        this.state.buttons = configs.buttons;\n        this.state.didOpened = configs.didOpened;\n        this._updateState();\n    }\n\n    onHideDialog = () => {\n        this.state.type = 0;\n        this.state.title = '';\n        this.state.content = '';\n        this.state.buttons = [];\n\n        this._updateState();\n    }\n}\n\nclass Dialog extends Reflux.PureComponent {\n    constructor(props) {\n        super(props);\n        this.state = {}; // our store will add its own state to the component's\n        this.store = DialogStore; // <- just assign the store class itself\n        this._BodyComponent = this\n            ._BodyComponent\n            .bind(this);\n        this._relayout = this\n            .props\n            ._relayout\n            .bind(this);\n    }\n\n    componentWillUpdate(nextProps, nextState) {}\n\n    componentDidUpdate(prevProps, prevState) {\n        console.log(prevState);\n        if (this.state.isOpened && !prevState.isOpened && typeof this.state.didOpened == \"function\") {\n            this.state.didOpened();\n        }\n        this._relayout();\n    }\n\n    _BodyComponent = (props) => {\n        var className = (props.extraPadding)\n            ? 'dialog-box-body dialog-box-body-padding'\n            : 'dialog-box-body';\n        var renderResult;\n\n        if (typeof(this.state.content) === 'string') {\n            let content = this\n                .state\n                .content\n                .split('\\n')\n                .map(function (item, i) {\n                    return (\n                        <span key={'dialog-item' + i}>{item}<br/></span>\n                    );\n                });\n\n            renderResult = (\n                <div className={className}>\n                    {content}\n                </div>\n            );\n\n        } else {\n            var Content = this.state.content;\n            renderResult = (\n                <div className={className}>\n                    <Content/>\n                </div>\n            );\n        }\n\n        return renderResult;\n    }\n\n    _HeaderComponent = () => {\n        var rendeResult = {};\n        if (this.state.title && this.state.title.length > 0) {\n            rendeResult = (\n                <header>{this.state.title}</header>\n            );\n\n        }\n        return rendeResult;\n    }\n\n    _FooterComponent = (props) => {\n        var classNames = ['dialog-button-block-primary'];\n\n        if (this.state.buttons.length == 2) {\n            classNames = ['dialog-button-inline', 'dialog-button-inline-primary']\n        }\n\n        var buttons = Object\n            .keys(this.state.buttons)\n            .map((key, i) => {\n                var item = this.state.buttons[i];\n                return (<DialogButton\n                    key={i}\n                    name={item.text}\n                    className={classNames[i]\n                    ? classNames[i]\n                    : \"\"}\n                    callback={item.callback}/>)\n            })\n\n        return (\n            <div className=\"dialog-box-footer\">{buttons}</div>\n        )\n    }\n\n    render() {\n\n        var dialogBoxClass = 'dialog-box';\n        var dataAttr = {\n            'data-dialog-name': this.state.dialogName\n        };\n        var hasExtraPaddingWithBody = false;\n\n        switch (this.state.type) {\n            default:\n            case 0:\n                return false;\n            case 1:\n            case 2:\n                break;\n            case 3:\n                hasExtraPaddingWithBody = true;\n                break;\n            case 4:\n                dialogBoxClass += ' dialog-list'\n                break;\n            case 5:\n                dialogBoxClass += ' dialog-scene'\n                break;\n        }\n\n        return (\n            <div className=\"dialog\" {...dataAttr}>\n                <div className=\"dialog-backdrop\"></div>\n                <div className={dialogBoxClass}>\n                    <div className=\"dialog-container\">\n                        <this._HeaderComponent ref={header => this.dialogHeader = header}/>\n                        <this._BodyComponent\n                            ref={body => this.dialogBody = body}\n                            extraPadding={hasExtraPaddingWithBody}/>\n                        <this._FooterComponent ref={footer => this.dialogFooter = footer}/>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nvar MixiedDialog = DialogRelayoutMixin(Dialog);\nexport {MixiedDialog as default, DialogStore, DialogActions};\n","import React, {Component} from 'react'\nimport {DialogActions} from \"./Dialog\"\n\nclass DialogButton extends Component {\n    constructor(props) {\n        super(props);\n    }\n    _onClick = () => {\n\n        var isOverride = false;\n\n        if (this.props.callback && typeof this.props.callback  == \"function\") {\n            isOverride = this.props.callback();\n        }\n\n        if (!isOverride && DialogActions) {\n            DialogActions.hideDialog();\n        }\n    }\n\n    render() {\n        return (\n            <div className={this.props.className} onClick={this._onClick}>{this.props.name}</div>\n        );\n    }\n}\n\nexport default DialogButton;","import React from 'react'\nimport {DialogActions} from \"./Dialog\"\nimport $ from \"jquery\";\n\nclass DialogDemo extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            data: \"appData\"\n        }\n        this.subView = {};\n    }\n\n    _openCallback = () => {\n        console.log(\"_openCallback\");\n        $(this.subView).find('input').focus();\n    }\n    \n    _submitCallback = () => {\n        console.log(\"submit\");\n        alert($(this.subView).find('input').val());\n        return true;\n    }\n\n    _subView = () => {\n        return (\n            <div ref={(subView)=> { this.subView = subView}}>\n                <p className='title'>Sub view of DialogDemo APP</p>\n                <input type=\"text\"/>\n                <button className='btn' onClick={this._submitCallback}>送出鈕</button>\n            </div>\n        )\n    }\n\n    _openDialog = () => {\n        DialogActions.showDialog({\n            title: \"Dialog標題\",\n            content: this._subView,\n            didOpened: this._openCallback,\n            buttons:  [\n                {\n                    text: \"取消\",\n                    callback: DialogActions.hideDialog\n                },\n                {\n                    text: \"送出鈕\",\n                    callback: this._submitCallback\n                }\n            ]\n        });\n    }\n\n    render() {\n        return (\n            <div className='dialogDemo'>\n                <button className='btn' onClick={this._openDialog}>打開dialog</button>\n            </div >\n        )\n    }\n}\nexport default DialogDemo","import React from 'react';\nimport Dialog from './components/dialog/Dialog';\nimport ReactDOM from 'react-dom';\nimport DialogDemo from './components/dialog/DialogDemo';\n\nReactDOM.render(\n    <DialogDemo/>, document.getElementById('main'))\nReactDOM.render(\n    <Dialog/>, document.getElementById('dialog'))"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvY29tcG9uZW50cy9jb3JlL01peGluLkRpYWxvZ1JlbGF5b3V0LmpzeCIsInNyYy9jb21wb25lbnRzL2RpYWxvZy9EaWFsb2cuanN4Iiwic3JjL2NvbXBvbmVudHMvZGlhbG9nL0RpYWxvZ0J1dHRvbi5qc3giLCJzcmMvY29tcG9uZW50cy9kaWFsb2cvRGlhbG9nRGVtby5qc3giLCJzcmMvZGlhbG9nRGVtby5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7O0FDQUE7Ozs7QUFDQTs7Ozs7Ozs7Ozs7O0FBRUEsU0FBUyxjQUFULENBQXdCLGdCQUF4QixFQUEwQyxPQUExQyxFQUFtRDs7QUFFL0MsY0FBVSxPQUFPLE1BQVAsQ0FBYztBQUNwQixjQUFNLGtCQURjLEVBQ007QUFDMUIsMkJBQW1CLGVBRkMsRUFFZ0I7QUFDcEMsbUJBQVcsWUFIUyxFQUdLO0FBQ3pCLHVCQUFlLGlCQUpLLENBSWE7QUFKYixLQUFkLEVBS1AsT0FMTyxDQUFWOztBQUYrQyxRQVN6QywyQkFUeUM7QUFBQTs7QUFVM0MsNkNBQVksS0FBWixFQUFtQjtBQUFBOztBQUFBLDZKQUNULEtBRFM7QUFFbEI7O0FBWjBDO0FBQUE7QUFBQSx3Q0FjL0I7QUFDUix3QkFBUSxHQUFSLENBQVksV0FBWjtBQUNBLG9CQUFJLE9BQU8sc0JBQUUsUUFBUSxJQUFWLENBQVg7QUFBQSxvQkFDSSxZQUFZLHNCQUFFLFFBQVEsU0FBVixDQURoQjtBQUFBLG9CQUVJLGdCQUFnQixzQkFBRSxRQUFRLGFBQVYsQ0FGcEI7QUFBQSxvQkFHSSxPQUFPLHNCQUFFLFFBQUYsRUFBWSxTQUFaLEVBSFg7O0FBS0Esb0JBQUssS0FBSyxLQUFMLENBQVcsUUFBWCxJQUF1QixLQUFLLFFBQUwsQ0FBYyxRQUFRLFdBQXRCLENBQXhCLElBQWdFLENBQUMsS0FBSyxLQUFMLENBQVcsUUFBWixJQUF3QixDQUFDLEtBQUssUUFB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QUEsc0JBQVEsV0FBVSxLQUFsQixFQUF3QixTQUFTLEtBQUssV0FBdEM7QUFBQTtBQUFBO0FBREosYUFESjtBQUtIOzs7O0VBdERvQixnQkFBTSxTOztrQkF3RGhCLFU7Ozs7O0FDNURmOzs7O0FBQ0E7Ozs7QUFDQTs7OztBQUNBOzs7Ozs7QUFFQSxtQkFBUyxNQUFULENBQ0kseURBREosRUFDbUIsU0FBUyxjQUFULENBQXdCLE1BQXhCLENBRG5CO0FBRUEsbUJBQVMsTUFBVCxDQUNJLHFEQURKLEVBQ2UsU0FBUyxjQUFULENBQXdCLFFBQXhCLENBRGYiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiaW1wb3J0ICQgZnJvbSBcImpxdWVyeVwiXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXG5cbmZ1bmN0aW9uIERpYWxvZ1JlbGF5b3V0KFdyYXBwZWRDb21wb25lbnQsIGNvbmZpZ3MpIHtcblxuICAgIGNvbmZpZ3MgPSBPYmplY3QuYXNzaWduKHtcbiAgICAgICAgcm9vdDogJyNHbG9iYWxDb250YWluZXInLCAvL2ZvciBib2R5ID4gZGl2XG4gICAgICAgIG1vZGlmaWVyUm9vdENsYXNzOiAnZGlhbG9nLW9wZW5lZCcsIC8vbW9kaWZpZXIgcm9vdFxuICAgICAgICBjb250YWluZXI6ICcuY29udGFpbmVyJywgLy9mb3IgcHJldmVudCBwYWdlIHNjcm9sbFxuICAgICAgICBjb250YWluZXJCb2R5OiAnLmNvbnRhaW5lci1ib2R5JyAvL2ZvciBwb3NpdGlvbmluZyBtYWluIGNvbnRlbnQgY29udGFpbmVyXG4gICAgfSwgY29uZmlncyk7XG5cbiAgICBjbGFzcyBNaXhpZWRDb21wb25lbnRXaXRoUmVsYXlvdXQgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgICAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICAgICAgc3VwZXIocHJvcHMpO1xuICAgICAgICB9XG5cbiAgICAgICAgX3JlbGF5b3V0KCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJfcmVsYXlvdXRcIik7XG4gICAgICAgICAgICB2YXIgcm9vdCA9ICQoY29uZmlncy5yb290KSxcbiAgICAgICAgICAgICAgICBjb250YWluZXIgPSAkKGNvbmZpZ3MuY29udGFpbmVyKSxcbiAgICAgICAgICAgICAgICBjb250YWluZXJCb2R5ID0gJChjb25maWdzLmNvbnRhaW5lckJvZHkpLFxuICAgICAgICAgICAgICAgIHBvc1kgPSAkKGRvY3VtZW50KS5zY3JvbGxUb3AoKTtcblxuICAgICAgICAgICAgaWYgKCh0aGlzLnN0YXRlLmlzT3BlbmVkICYmIHJvb3QuaGFzQ2xhc3MoY29uZmlncy50b2dnbGVDbGFzcykpIHx8ICghdGhpcy5zdGF0ZS5pc09wZW5lZCAmJiAhcm9vdC5oYXNDbGFzcyhjb25maWdzLnRvZ2dsZUNsYXNzKSkpIFxuICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgaWYgKHRoaXMuc3RhdGUuaXNPcGVuZWQpIHtcbiAgICAgICAgICAgICAgICAvL21vZGlmaWVyIHJvb3RcbiAgICAgICAgICAgICAgICByb290LnRvZ2dsZUNsYXNzKGNvbmZpZ3MubW9kaWZpZXJSb290Q2xhc3MpO1xuICAgICAgICAgICAgICAgIC8vcHJldmVudCBwYWdlIHNjcm9sbCBmb3IgbW9iaWxlXG4gICAgICAgICAgICAgICAgY29udGFpbmVyLmNzcyh7cG9zaXRpb246ICdhYnNvbHV0ZSd9KTtcbiAgICAgICAgICAgICAgICAvL3Bvc2l0aW9uaW5nIGNvbnRhaW5lciBvZiBtYWluIGNvbnRlbnQgaW4gZGlhbG9nIGJhY2tncm91bmRcbiAgICAgICAgICAgICAgICBjb250YWluZXJCb2R5LmNzcyh7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAnZml4ZWQnLFxuICAgICAgICAgICAgICAgICAgICB0b3A6IC0ocG9zWSlcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy9yZXNldCBhbGxcbiAgICAgICAgICAgICAgICByb290LnJlbW92ZUNsYXNzKGNvbmZpZ3MubW9kaWZpZXJSb290Q2xhc3MpO1xuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5yZW1vdmVBdHRyKCdzdHlsZScpO1xuICAgICAgICAgICAgICAgIGNvbnRhaW5lckJvZHkucmVtb3ZlQXR0cignc3R5bGUnKTtcbiAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS5zY3JvbGxUb3AocG9zWSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuXG4gICAgICAgIHByb2MoKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygncHJvYycpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygncmVsYXlvdXQgY29tcG9uZW50RGlkTW91bnQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbXBvbmVudFdpbGxVbm1vdW50KCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3JlbGF5b3V0IGNvbXBvbmVudFdpbGxVbm1vdW50Jyk7XG4gICAgICAgIH1cblxuICAgICAgICBjb21wb25lbnRXaWxsTW91bnQoKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygncmVsYXlvdXQgY29tcG9uZW50V2lsbE1vdW50Jyk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIHJlbmRlcigpIHtcblxuICAgICAgICAgICAgdmFyIHByb3BzID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5wcm9wcywge1xuICAgICAgICAgICAgICAgIHJlZjogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2MuYmluZCh0aGlzKVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgX3JlbGF5b3V0OiB0aGlzLl9yZWxheW91dFxuICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgcmV0dXJuIDxXcmFwcGVkQ29tcG9uZW50IHsuLi5wcm9wc30vPlxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIE1peGllZENvbXBvbmVudFdpdGhSZWxheW91dDtcbn1cbmV4cG9ydCBkZWZhdWx0IERpYWxvZ1JlbGF5b3V0OyIsImltcG9ydCBSZWZsdXggZnJvbSBcInJlZmx1eFwiXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXG5pbXBvcnQgJCBmcm9tIFwianF1ZXJ5XCJcbmltcG9ydCBEaWFsb2dCdXR0b24gZnJvbSBcIi4vRGlhbG9nQnV0dG9uXCJcbmltcG9ydCBEaWFsb2dSZWxheW91dE1peGluIGZyb20gXCIuLi9jb3JlL01peGluLkRpYWxvZ1JlbGF5b3V0XCJcblxudmFyIERpYWxvZ0FjdGlvbnMgPSBSZWZsdXguY3JlYXRlQWN0aW9ucyhbXG4gICAgXCJzaG93RGlhbG9nXCIsXG4gICAgXCJzaG93RGlhbG9nWWVzTm9cIixcbiAgICBcInNob3dEaWFsb2dMaXN0XCIsXG4gICAgXCJzaG93RGlhbG9nTGlzdFllc05vXCIsXG4gICAgXCJzaG93RGlhbG9nU2NlbmVcIixcbiAgICBcInNob3dEaWFsb2dUb2FzdFwiLFxuICAgIFwiaGlkZURpYWxvZ1wiLFxuICAgIFwic2V0RGlhbG9nTmFtZVwiLFxuICAgIFwiY2xlYXJEaWFsb2dOYW1lXCJcbl0pO1xuXG5jbGFzcyBEaWFsb2dTdG9yZSBleHRlbmRzIFJlZmx1eC5TdG9yZSB7XG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuICAgICAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICAgICAgaXNPcGVuZWQ6IGZhbHNlLFxuICAgICAgICAgICAgcG9zWTogMCxcbiAgICAgICAgICAgIHR5cGU6IDAsXG4gICAgICAgICAgICB0aXRsZTogJycsXG4gICAgICAgICAgICBjb250ZW50OiAnJyxcbiAgICAgICAgICAgIGJ1dHRvbnM6IFtdLFxuICAgICAgICAgICAgZGlkT3BlbmVkOiBudWxsLFxuICAgICAgICAgICAgd2lsbE9wZW46IG51bGwsXG4gICAgICAgICAgICBkaWRDbG9zZWQ6IG51bGxcblxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmxpc3RlbmFibGVzID0gRGlhbG9nQWN0aW9ucztcbiAgICB9XG5cbiAgICBfdXBkYXRlU3RhdGUoKSB7XG4gICAgICAgIGlmICghdGhpcy5zdGF0ZS5pc09wZW5lZCAmJiB0aGlzLnN0YXRlLnR5cGUgIT0gMCkge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZS5wb3NZID0gJChkb2N1bWVudCkuc2Nyb2xsVG9wKCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnN0YXRlLmlzT3BlbmVkID0gKHRoaXMuc3RhdGUudHlwZSAhPSAwKTtcbiAgICAgICAgdGhpcy50cmlnZ2VyKHRoaXMuc3RhdGUpO1xuICAgIH1cblxuICAgIF9jaGVja0NvbmZpZ3NJbnRlcmZhY2UgPSAoY29uZmlncykgPT4ge1xuICAgICAgICB2YXIgcmVzdWx0ID0gdHJ1ZTtcblxuICAgICAgICBPYmplY3RcbiAgICAgICAgICAgIC5rZXlzKGNvbmZpZ3MpXG4gICAgICAgICAgICAubWFwKChrZXksIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gY29uZmlnc1trZXldO1xuXG4gICAgICAgICAgICAgICAgc3dpdGNoIChrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcInRpdGxlXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcInRpdGxlIHNob3VsZCBiZSBhIHN0cmluZ1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiY29udGVudFwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiB2YWx1ZSAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJjb250ZW50IHNob3VsZCBiZSBhIGZ1bmN0aW9uYWwgY29tcG9uZW50IG9yIGEgc3RyaW5nXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJidXR0b25zXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbHVlKSAhPT0gJ1tvYmplY3QgQXJyYXldJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJidXR0b25zIHNob3VsZCBiZSBhbiBBcnJheVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZGlkT3BlbmVkXCI6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ3aWxsT3BlblwiOlxuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiZGlkQ2xvc2VkXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiY2FsbGJhY2sgc2hvdWxkIGJlIGFuIGZ1bmN0aW9uXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcblxuICAgIH1cblxuICAgIG9uU2hvd0RpYWxvZyA9IChjb25maWdzID0ge1xuICAgICAgICB0aXRsZTogXCJcIixcbiAgICAgICAgY29udGVudDoge30sXG4gICAgICAgIGJ1dHRvbnM6IFtdLFxuICAgICAgICBkaWRPcGVuZWQ6IG51bGxcbiAgICB9KSA9PiB7XG5cbiAgICAgICAgaWYgKCF0aGlzLl9jaGVja0NvbmZpZ3NJbnRlcmZhY2UoY29uZmlncykpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc3RhdGUudHlwZSA9IDE7XG4gICAgICAgIHRoaXMuc3RhdGUudGl0bGUgPSBjb25maWdzLnRpdGxlO1xuICAgICAgICB0aGlzLnN0YXRlLmNvbnRlbnQgPSBjb25maWdzLmNvbnRlbnQ7XG4gICAgICAgIHRoaXMuc3RhdGUuYnV0dG9ucyA9IGNvbmZpZ3MuYnV0dG9ucztcbiAgICAgICAgdGhpcy5zdGF0ZS5kaWRPcGVuZWQgPSBjb25maWdzLmRpZE9wZW5lZDtcbiAgICAgICAgdGhpcy5fdXBkYXRlU3RhdGUoKTtcbiAgICB9XG5cbiAgICBvbkhpZGVEaWFsb2cgPSAoKSA9PiB7XG4gICAgICAgIHRoaXMuc3RhdGUudHlwZSA9IDA7XG4gICAgICAgIHRoaXMuc3RhdGUudGl0bGUgPSAnJztcbiAgICAgICAgdGhpcy5zdGF0ZS5jb250ZW50ID0gJyc7XG4gICAgICAgIHRoaXMuc3RhdGUuYnV0dG9ucyA9IFtdO1xuXG4gICAgICAgIHRoaXMuX3VwZGF0ZVN0YXRlKCk7XG4gICAgfVxufVxuXG5jbGFzcyBEaWFsb2cgZXh0ZW5kcyBSZWZsdXguUHVyZUNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICAgICAgc3VwZXIocHJvcHMpO1xuICAgICAgICB0aGlzLnN0YXRlID0ge307IC8vIG91ciBzdG9yZSB3aWxsIGFkZCBpdHMgb3duIHN0YXRlIHRvIHRoZSBjb21wb25lbnQnc1xuICAgICAgICB0aGlzLnN0b3JlID0gRGlhbG9nU3RvcmU7IC8vIDwtIGp1c3QgYXNzaWduIHRoZSBzdG9yZSBjbGFzcyBpdHNlbGZcbiAgICAgICAgdGhpcy5fQm9keUNvbXBvbmVudCA9IHRoaXNcbiAgICAgICAgICAgIC5fQm9keUNvbXBvbmVudFxuICAgICAgICAgICAgLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuX3JlbGF5b3V0ID0gdGhpc1xuICAgICAgICAgICAgLnByb3BzXG4gICAgICAgICAgICAuX3JlbGF5b3V0XG4gICAgICAgICAgICAuYmluZCh0aGlzKTtcbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsVXBkYXRlKG5leHRQcm9wcywgbmV4dFN0YXRlKSB7fVxuXG4gICAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wcywgcHJldlN0YXRlKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHByZXZTdGF0ZSk7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlLmlzT3BlbmVkICYmICFwcmV2U3RhdGUuaXNPcGVuZWQgJiYgdHlwZW9mIHRoaXMuc3RhdGUuZGlkT3BlbmVkID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZS5kaWRPcGVuZWQoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9yZWxheW91dCgpO1xuICAgIH1cblxuICAgIF9Cb2R5Q29tcG9uZW50ID0gKHByb3BzKSA9PiB7XG4gICAgICAgIHZhciBjbGFzc05hbWUgPSAocHJvcHMuZXh0cmFQYWRkaW5nKVxuICAgICAgICAgICAgPyAnZGlhbG9nLWJveC1ib2R5IGRpYWxvZy1ib3gtYm9keS1wYWRkaW5nJ1xuICAgICAgICAgICAgOiAnZGlhbG9nLWJveC1ib2R5JztcbiAgICAgICAgdmFyIHJlbmRlclJlc3VsdDtcblxuICAgICAgICBpZiAodHlwZW9mKHRoaXMuc3RhdGUuY29udGVudCkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBsZXQgY29udGVudCA9IHRoaXNcbiAgICAgICAgICAgICAgICAuc3RhdGVcbiAgICAgICAgICAgICAgICAuY29udGVudFxuICAgICAgICAgICAgICAgIC5zcGxpdCgnXFxuJylcbiAgICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uIChpdGVtLCBpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBrZXk9eydkaWFsb2ctaXRlbScgKyBpfT57aXRlbX08YnIvPjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmVuZGVyUmVzdWx0ID0gKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWV9PlxuICAgICAgICAgICAgICAgICAgICB7Y29udGVudH1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhciBDb250ZW50ID0gdGhpcy5zdGF0ZS5jb250ZW50O1xuICAgICAgICAgICAgcmVuZGVyUmVzdWx0ID0gKFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc05hbWV9PlxuICAgICAgICAgICAgICAgICAgICA8Q29udGVudC8+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlbmRlclJlc3VsdDtcbiAgICB9XG5cbiAgICBfSGVhZGVyQ29tcG9uZW50ID0gKCkgPT4ge1xuICAgICAgICB2YXIgcmVuZGVSZXN1bHQgPSB7fTtcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUudGl0bGUgJiYgdGhpcy5zdGF0ZS50aXRsZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZW5kZVJlc3VsdCA9IChcbiAgICAgICAgICAgICAgICA8aGVhZGVyPnt0aGlzLnN0YXRlLnRpdGxlfTwvaGVhZGVyPlxuICAgICAgICAgICAgKTtcblxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZW5kZVJlc3VsdDtcbiAgICB9XG5cbiAgICBfRm9vdGVyQ29tcG9uZW50ID0gKHByb3BzKSA9PiB7XG4gICAgICAgIHZhciBjbGFzc05hbWVzID0gWydkaWFsb2ctYnV0dG9uLWJsb2NrLXByaW1hcnknXTtcblxuICAgICAgICBpZiAodGhpcy5zdGF0ZS5idXR0b25zLmxlbmd0aCA9PSAyKSB7XG4gICAgICAgICAgICBjbGFzc05hbWVzID0gWydkaWFsb2ctYnV0dG9uLWlubGluZScsICdkaWFsb2ctYnV0dG9uLWlubGluZS1wcmltYXJ5J11cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBidXR0b25zID0gT2JqZWN0XG4gICAgICAgICAgICAua2V5cyh0aGlzLnN0YXRlLmJ1dHRvbnMpXG4gICAgICAgICAgICAubWFwKChrZXksIGkpID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IHRoaXMuc3RhdGUuYnV0dG9uc1tpXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gKDxEaWFsb2dCdXR0b25cbiAgICAgICAgICAgICAgICAgICAga2V5PXtpfVxuICAgICAgICAgICAgICAgICAgICBuYW1lPXtpdGVtLnRleHR9XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lc1tpXVxuICAgICAgICAgICAgICAgICAgICA/IGNsYXNzTmFtZXNbaV1cbiAgICAgICAgICAgICAgICAgICAgOiBcIlwifVxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjaz17aXRlbS5jYWxsYmFja30vPilcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZGlhbG9nLWJveC1mb290ZXJcIj57YnV0dG9uc308L2Rpdj5cbiAgICAgICAgKVxuICAgIH1cblxuICAgIHJlbmRlcigpIHtcblxuICAgICAgICB2YXIgZGlhbG9nQm94Q2xhc3MgPSAnZGlhbG9nLWJveCc7XG4gICAgICAgIHZhciBkYXRhQXR0ciA9IHtcbiAgICAgICAgICAgICdkYXRhLWRpYWxvZy1uYW1lJzogdGhpcy5zdGF0ZS5kaWFsb2dOYW1lXG4gICAgICAgIH07XG4gICAgICAgIHZhciBoYXNFeHRyYVBhZGRpbmdXaXRoQm9keSA9IGZhbHNlO1xuXG4gICAgICAgIHN3aXRjaCAodGhpcy5zdGF0ZS50eXBlKSB7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICBoYXNFeHRyYVBhZGRpbmdXaXRoQm9keSA9IHRydWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgZGlhbG9nQm94Q2xhc3MgKz0gJyBkaWFsb2ctbGlzdCdcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgICAgICBkaWFsb2dCb3hDbGFzcyArPSAnIGRpYWxvZy1zY2VuZSdcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImRpYWxvZ1wiIHsuLi5kYXRhQXR0cn0+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJkaWFsb2ctYmFja2Ryb3BcIj48L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17ZGlhbG9nQm94Q2xhc3N9PlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImRpYWxvZy1jb250YWluZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx0aGlzLl9IZWFkZXJDb21wb25lbnQgcmVmPXtoZWFkZXIgPT4gdGhpcy5kaWFsb2dIZWFkZXIgPSBoZWFkZXJ9Lz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDx0aGlzLl9Cb2R5Q29tcG9uZW50XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmPXtib2R5ID0+IHRoaXMuZGlhbG9nQm9keSA9IGJvZHl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmFQYWRkaW5nPXtoYXNFeHRyYVBhZGRpbmdXaXRoQm9keX0vPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRoaXMuX0Zvb3RlckNvbXBvbmVudCByZWY9e2Zvb3RlciA9PiB0aGlzLmRpYWxvZ0Zvb3RlciA9IGZvb3Rlcn0vPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApXG4gICAgfVxufVxuXG52YXIgTWl4aWVkRGlhbG9nID0gRGlhbG9nUmVsYXlvdXRNaXhpbihEaWFsb2cpO1xuZXhwb3J0IHtNaXhpZWREaWFsb2cgYXMgZGVmYXVsdCwgRGlhbG9nU3RvcmUsIERpYWxvZ0FjdGlvbnN9O1xuIiwiaW1wb3J0IFJlYWN0LCB7Q29tcG9uZW50fSBmcm9tICdyZWFjdCdcbmltcG9ydCB7RGlhbG9nQWN0aW9uc30gZnJvbSBcIi4vRGlhbG9nXCJcblxuY2xhc3MgRGlhbG9nQnV0dG9uIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG4gICAgfVxuICAgIF9vbkNsaWNrID0gKCkgPT4ge1xuXG4gICAgICAgIHZhciBpc092ZXJyaWRlID0gZmFsc2U7XG5cbiAgICAgICAgaWYgKHRoaXMucHJvcHMuY2FsbGJhY2sgJiYgdHlwZW9mIHRoaXMucHJvcHMuY2FsbGJhY2sgID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgaXNPdmVycmlkZSA9IHRoaXMucHJvcHMuY2FsbGJhY2soKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghaXNPdmVycmlkZSAmJiBEaWFsb2dBY3Rpb25zKSB7XG4gICAgICAgICAgICBEaWFsb2dBY3Rpb25zLmhpZGVEaWFsb2coKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXt0aGlzLnByb3BzLmNsYXNzTmFtZX0gb25DbGljaz17dGhpcy5fb25DbGlja30+e3RoaXMucHJvcHMubmFtZX08L2Rpdj5cbiAgICAgICAgKTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IERpYWxvZ0J1dHRvbjsiLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnXG5pbXBvcnQge0RpYWxvZ0FjdGlvbnN9IGZyb20gXCIuL0RpYWxvZ1wiXG5pbXBvcnQgJCBmcm9tIFwianF1ZXJ5XCI7XG5cbmNsYXNzIERpYWxvZ0RlbW8gZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKHByb3BzKSB7XG4gICAgICAgIHN1cGVyKHByb3BzKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIGRhdGE6IFwiYXBwRGF0YVwiXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zdWJWaWV3ID0ge307XG4gICAgfVxuXG4gICAgX29wZW5DYWxsYmFjayA9ICgpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coXCJfb3BlbkNhbGxiYWNrXCIpO1xuICAgICAgICAkKHRoaXMuc3ViVmlldykuZmluZCgnaW5wdXQnKS5mb2N1cygpO1xuICAgIH1cbiAgICBcbiAgICBfc3VibWl0Q2FsbGJhY2sgPSAoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwic3VibWl0XCIpO1xuICAgICAgICBhbGVydCgkKHRoaXMuc3ViVmlldykuZmluZCgnaW5wdXQnKS52YWwoKSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIF9zdWJWaWV3ID0gKCkgPT4ge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiByZWY9eyhzdWJWaWV3KT0+IHsgdGhpcy5zdWJWaWV3ID0gc3ViVmlld319PlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT0ndGl0bGUnPlN1YiB2aWV3IG9mIERpYWxvZ0RlbW8gQVBQPC9wPlxuICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiLz5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT0nYnRuJyBvbkNsaWNrPXt0aGlzLl9zdWJtaXRDYWxsYmFja30+6YCB5Ye66YiVPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKVxuICAgIH1cblxuICAgIF9vcGVuRGlhbG9nID0gKCkgPT4ge1xuICAgICAgICBEaWFsb2dBY3Rpb25zLnNob3dEaWFsb2coe1xuICAgICAgICAgICAgdGl0bGU6IFwiRGlhbG9n5qiZ6aGMXCIsXG4gICAgICAgICAgICBjb250ZW50OiB0aGlzLl9zdWJWaWV3LFxuICAgICAgICAgICAgZGlkT3BlbmVkOiB0aGlzLl9vcGVuQ2FsbGJhY2ssXG4gICAgICAgICAgICBidXR0b25zOiAgW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogXCLlj5bmtohcIixcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IERpYWxvZ0FjdGlvbnMuaGlkZURpYWxvZ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBcIumAgeWHuumIlVwiLFxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogdGhpcy5fc3VibWl0Q2FsbGJhY2tcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdkaWFsb2dEZW1vJz5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT0nYnRuJyBvbkNsaWNrPXt0aGlzLl9vcGVuRGlhbG9nfT7miZPplotkaWFsb2c8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2ID5cbiAgICAgICAgKVxuICAgIH1cbn1cbmV4cG9ydCBkZWZhdWx0IERpYWxvZ0RlbW8iLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IERpYWxvZyBmcm9tICcuL2NvbXBvbmVudHMvZGlhbG9nL0RpYWxvZyc7XG5pbXBvcnQgUmVhY3RET00gZnJvbSAncmVhY3QtZG9tJztcbmltcG9ydCBEaWFsb2dEZW1vIGZyb20gJy4vY29tcG9uZW50cy9kaWFsb2cvRGlhbG9nRGVtbyc7XG5cblJlYWN0RE9NLnJlbmRlcihcbiAgICA8RGlhbG9nRGVtby8+LCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFpbicpKVxuUmVhY3RET00ucmVuZGVyKFxuICAgIDxEaWFsb2cvPiwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RpYWxvZycpKSJdfQ=="}