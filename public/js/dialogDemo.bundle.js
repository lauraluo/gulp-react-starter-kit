/* publish time Friday, April 7th, 2017, 6:31:37 PM*/!function e(t,o,n){function a(l,i){if(!o[l]){if(!t[l]){var u="function"==typeof require&&require;if(!i&&u)return u(l,!0);if(r)return r(l,!0);var c=new Error("Cannot find module '"+l+"'");throw c.code="MODULE_NOT_FOUND",c}var s=o[l]={exports:{}};t[l][0].call(s.exports,function(e){var o=t[l][1][e];return a(o||e)},s,s.exports,e,t,o,n)}return o[l].exports}for(var r="function"==typeof require&&require,l=0;l<n.length;l++)a(n[l]);return a}({1:[function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){return t=Object.assign({root:"#GlobalContainer",modifierRootClass:"dialog-opened",container:".container",containerBody:".container-body"},t),function(o){function n(e){return a(this,n),r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e))}return l(n,o),u(n,[{key:"_relayout",value:function(){console.log("_relayout");var e=(0,s.default)(t.root),o=(0,s.default)(t.container),n=(0,s.default)(t.containerBody),a=(0,s.default)(document).scrollTop();this.state.isOpened&&e.hasClass(t.toggleClass)||!this.state.isOpened&&!e.hasClass(t.toggleClass)||(this.state.isOpened?(e.toggleClass(t.modifierRootClass),o.css({position:"absolute"}),n.css({position:"fixed",top:-a})):(e.removeClass(t.modifierRootClass),o.removeAttr("style"),n.removeAttr("style"),(0,s.default)(document).scrollTop(a)))}},{key:"proc",value:function(){console.log("proc")}},{key:"componentDidMount",value:function(){console.log("relayout componentDidMount")}},{key:"componentWillUnmount",value:function(){console.log("relayout componentWillUnmount")}},{key:"componentWillMount",value:function(){console.log("relayout componentWillMount")}},{key:"render",value:function(){var t=this,o=Object.assign({},this.props,{ref:function(){t.proc.bind(t)},_relayout:this._relayout});return d.default.createElement(e,o)}}]),n}(d.default.Component)}Object.defineProperty(o,"__esModule",{value:!0});var u=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),c=e("jquery"),s=n(c),f=e("react"),d=n(f);o.default=i},{jquery:"jquery",react:"react"}],2:[function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(o,"__esModule",{value:!0}),o.DialogActions=o.DialogStore=o.DialogCore=o.default=void 0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},u=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),c=e("reflux"),s=n(c),f=e("react"),d=n(f),p=e("jquery"),b=n(p),y=e("./DialogButton"),m=n(y),g=e("../core/Mixin.DialogRelayout"),h=n(g),_=s.default.createActions(["showDialog","showDialogYesNo","showDialogList","showDialogListYesNo","showDialogScene","showDialogToast","hideDialog","setDialogName","clearDialogName"]),v=function(e){function t(e){a(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o._checkConfigsInterface=function(e){var t=!0;return Object.keys(e).map(function(o,n){var a=e[o];switch(o){case"title":"string"!=typeof a&&(console.error("title should be a string"),t=!1);break;case"content":"function"!=typeof a&&"string"!=typeof a&&(console.error("content should be a functional component or a string"),t=!1);break;case"buttons":"[object Array]"!==Object.prototype.toString.call(a)&&(console.error("buttons should be an Array"),t=!1);break;case"didOpened":case"willOpen":case"didClosed":"function"!=typeof a&&(console.error("callback should be an function"),t=!1);break;default:return}}),t},o.onShowDialog=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{title:"",content:{},buttons:[],didOpened:null};o._checkConfigsInterface(e)&&(o.state.type=1,o.state.title=e.title,o.state.content=e.content,o.state.buttons=e.buttons,o.state.didOpened=e.didOpened,o._updateState())},o.onHideDialog=function(){o.state.type=0,o.state.title="",o.state.content="",o.state.buttons=[],o._updateState()},o.state={isOpened:!1,posY:0,type:0,title:"",content:"",buttons:[],didOpened:null,willOpen:null,didClosed:null},o.listenables=_,o}return l(t,e),u(t,[{key:"_updateState",value:function(){this.state.isOpened||0==this.state.type||(this.state.posY=(0,b.default)(document).scrollTop()),this.state.isOpened=0!=this.state.type,this.trigger(this.state)}}]),t}(s.default.Store),O=function(e){function t(e){a(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return w.call(o),o.state={},o.store=v,o._BodyComponent=o._BodyComponent.bind(o),o._relayout=o.props._relayout.bind(o),o}return l(t,e),u(t,[{key:"componentWillUpdate",value:function(e,t){}},{key:"componentDidUpdate",value:function(e,t){console.log(t),this.state.isOpened&&!t.isOpened&&"function"==typeof this.state.didOpened&&this.state.didOpened(),this._relayout()}},{key:"render",value:function(){var e=this,t="dialog-box",o={"data-dialog-name":this.state.dialogName},n=!1;switch(this.state.type){default:case 0:return!1;case 1:case 2:break;case 3:n=!0;break;case 4:t+=" dialog-list";break;case 5:t+=" dialog-scene"}return d.default.createElement("div",i({className:"dialog"},o),d.default.createElement("div",{className:"dialog-backdrop"}),d.default.createElement("div",{className:t},d.default.createElement("div",{className:"dialog-container"},d.default.createElement(this._HeaderComponent,{ref:function(t){return e.dialogHeader=t}}),d.default.createElement(this._BodyComponent,{ref:function(t){return e.dialogBody=t},extraPadding:n}),d.default.createElement(this._FooterComponent,{ref:function(t){return e.dialogFooter=t}}))))}}]),t}(s.default.PureComponent),w=function(){var e=this;this._BodyComponent=function(t){var o,n=t.extraPadding?"dialog-box-body dialog-box-body-padding":"dialog-box-body";if("string"==typeof e.state.content){var a=e.state.content.split("\n").map(function(e,t){return d.default.createElement("span",{key:"dialog-item"+t},e,d.default.createElement("br",null))});o=d.default.createElement("div",{className:n},a)}else{var r=e.state.content;o=d.default.createElement("div",{className:n},d.default.createElement(r,null))}return o},this._HeaderComponent=function(){var t={};return e.state.title&&e.state.title.length>0&&(t=d.default.createElement("header",null,e.state.title)),t},this._FooterComponent=function(t){var o=["dialog-button-block-primary"];2==e.state.buttons.length&&(o=["dialog-button-inline","dialog-button-inline-primary"]);var n=Object.keys(e.state.buttons).map(function(t,n){var a=e.state.buttons[n];return d.default.createElement(m.default,{key:n,name:a.text,className:o[n]?o[n]:"",callback:a.callback})});return d.default.createElement("div",{className:"dialog-box-footer"},n)}},k=(0,h.default)(O);o.default=k,o.DialogCore=O,o.DialogStore=v,o.DialogActions=_},{"../core/Mixin.DialogRelayout":1,"./DialogButton":3,jquery:"jquery",react:"react",reflux:"reflux"}],3:[function(e,t,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(o,"__esModule",{value:!0});var l=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),i=e("react"),u=function(e){return e&&e.__esModule?e:{default:e}}(i),c=e("./Dialog"),s=function(e){function t(e){n(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o._onClick=function(){var e=!1;o.props.callback&&"function"==typeof o.props.callback&&(e=o.props.callback()),!e&&c.DialogActions&&c.DialogActions.hideDialog()},o}return r(t,e),l(t,[{key:"render",value:function(){return u.default.createElement("div",{className:this.props.className,onClick:this._onClick},this.props.name)}}]),t}(i.Component);o.default=s},{"./Dialog":2,react:"react"}],4:[function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),u=e("react"),c=n(u),s=e("./Dialog"),f=e("jquery"),d=n(f),p=function(e){function t(e){a(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o._openCallback=function(){console.log("_openCallback"),(0,d.default)(o.subView).find("input").focus()},o._submitCallback=function(){return console.log("submit"),alert((0,d.default)(o.subView).find("input").val()),!0},o._submitCallback2=function(){return console.log("submit"),o.setState({data:"aadffd"}),!0},o._subView=function(){return c.default.createElement("div",{ref:function(e){o.subView=e}},c.default.createElement("p",{className:"title"},"Sub view of DialogDemo APP abcd"),c.default.createElement("p",null,o.state.data),c.default.createElement("input",{type:"text"}),c.default.createElement("button",{className:"btn",onClick:o._submitCallback},"送出鈕"))},o._openDialog=function(){s.DialogActions.showDialog({title:"Dialog標題",content:o._subView,didOpened:o._openCallback,buttons:[{text:"取消",callback:o._submitCallback2},{text:"送出鈕",callback:o._submitCallback}]})},o.state={data:"appData"},o.subView={},o}return l(t,e),i(t,[{key:"render",value:function(){return c.default.createElement("div",{className:"dialogDemo"},c.default.createElement("button",{className:"btn",onClick:this._openDialog},"打開dialogavcd"))}}]),t}(c.default.Component);o.default=p},{"./Dialog":2,jquery:"jquery",react:"react"}],5:[function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var a=e("react"),r=n(a),l=e("./components/dialog/Dialog"),i=n(l),u=e("react-dom"),c=n(u),s=e("./components/dialog/DialogDemo"),f=n(s);c.default.render(r.default.createElement(f.default,null),document.getElementById("main")),c.default.render(r.default.createElement(i.default,null),document.getElementById("dialog"))},{"./components/dialog/Dialog":2,"./components/dialog/DialogDemo":4,react:"react","react-dom":"react-dom"}]},{},[5]);